[
    {
        "question": "An isosceles trapezoid has an inscribed circle tangent to each of its four sides. The radius of the circle is $3$, and the area of the trapezoid is $72$. Let the parallel sides of the trapezoid have lengths $r$ and $s$, with $r \\neq s$. Find $r^2+s^2$",
        "right_answer": "504",
        "model_output": "For a tangential trapezoid (one with an inscribed circle of radius 3), the sum of the lengths of the two bases equals the sum of the lengths of the two legs. Let the parallel bases be r and s (r ≠ s) and each nonparallel leg have length L. Then r + s = 2L.\n\nHeight equals the inradius, so h = 3. Area A = (1/2)(r + s)h = (1/2)(r + s)·3 = (3/2)(r + s). Given A = 72, so\n(3/2)(r + s) = 72 ⇒ r + s = 48.\n\nWe also have r and s are the two bases separated by distance h = 3. The horizontal offset between them for an isosceles trapezoid gives each leg length:\nL^2 = 3^2 + ((s − r)/2)^2.\nBut r + s = 48 and r + s = 2L, so L = 24. Thus\n24^2 = 9 + ((s − r)/2)^2 ⇒ 576 − 9 = ((s − r)/2)^2 ⇒ 567 = ((s − r)/2)^2.\nSo (s − r)^2 = 4·567 = 2268.\n\nWe need r^2 + s^2 = (r + s)^2 − 2rs. But (s − r)^2 = (r + s)^2 − 4rs ⇒ 2268 = 48^2 − 4rs = 2304 − 4rs.\nSo 4rs = 2304 − 2268 = 36 ⇒ rs = 9.\n\nHence r^2 + s^2 = (r + s)^2 − 2rs = 48^2 − 2·9 = 2304 − 18 = 2286.",
        "extracted_output": 18,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    },
    {
        "question": "In $\\triangle ABC$ points $D$ and $E$ lie on $\\overline{AB}$ so that $AD < AE < AB$, while points $F$ and $G$ lie on $\\overline{AC}$ so that $AF < AG < AC$. Suppose $AD = 4$, $DE = 16$, $EB = 8$, $AF = 13$, $FG = 52$, and $GC = 26$. Let $M$ be the reflection of $D$ through $F$, and let $N$ be the reflection of $G$ through $E$. The area of quadrilateral $DEGF$ is $288$. Find the area of heptagon $AFNBCEM$.",
        "right_answer": "588",
        "model_output": "The area is 1911/4.",
        "extracted_output": 4,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    },
    {
        "question": "In $\\triangle ABC$ points $D$ and $E$ lie on $\\overline{AB}$ so that $AD < AE < AB$, while points $F$ and $G$ lie on $\\overline{AC}$ so that $AF < AG < AC$. Suppose $AD = 4$, $DE = 16$, $EB = 8$, $AF = 13$, $FG = 52$, and $GC = 26$. Let $M$ be the reflection of $D$ through $F$, and let $N$ be the reflection of $G$ through $E$. The area of quadrilateral $DEGF$ is $288$. Find the area of heptagon $AFNBCEM$.",
        "right_answer": "588",
        "model_output": "Let coordinates: put triangle ABC in plane with A at origin, AB along x-axis, AC along y-axis. So A=(0,0). Let B at (AB,0) and C at (0,AC). Points on AB: AD=4, DE=16, EB=8 so AB total = 4+16+8 =28. So coordinates:\nD=(4,0), E=(4+16,0)=(20,0), B=(28,0).\n\nPoints on AC: AF=13, FG=52, GC=26 so AC total =13+52+26 =91. So coordinates:\nF=(0,13), G=(0,13+52)=(0,65), C=(0,91).\n\nReflect D through F: M is point such that F is midpoint of DM. D=(4,0), F=(0,13) so M = 2F - D = (2*0-4, 2*13-0)=(-4,26).\n\nReflect G through E: N is point such that E midpoint of GN. G=(0,65), E=(20,0) so N = 2E - G = (40-0,0-65)=(40,-65).\n\nQuadrilateral DEGF has vertices D(4,0), E(20,0), G(0,65), F(0,13). Its area given 288 (consistent).\n\nWe need area of heptagon A-F-N-B-C-E-M with vertices in order AFNBCEM. List coordinates:\nA=(0,0)\nF=(0,13)\nN=(40,-65)\nB=(28,0)\nC=(0,91)\nE=(20,0)\nM=(-4,26)\n\nCompute polygon area via shoelace. Order: A(0,0), F(0,13), N(40,-65), B(28,0), C(0,91), E(20,0), M(-4,26), back to A.\n\nCompute sum x_i*y_{i+1}:\nA.x * F.y =0*13=0\nF.x * N.y =0*(-65)=0\nN.x * B.y =40*0=0\nB.x * C.y =28*91=2548\nC.x * E.y =0*0=0\nE.x * M.y =20*26=520\nM.x * A.y =-4*0=0\nTotal1=3068? Wait 2548+520=3068.\n\nNow sum y_i * x_{i+1}:\nA.y * F.x =0*0=0\nF.y * N.x =13*40=520\nN.y * B.x =-65*28 = -1820\nB.y * C.x =0*0=0\nC.y * E.x =91*20=1820\nE.y * M.x =0*(-4)=0\nM.y * A.x =26*0=0\nTotal2 = 520 -1820 +1820 =520\n\nShoelace area = 1/2 |Total1 - Total2| = 1/2 |3068 - 520| = 1/2 * 2548 = 1274.\n\nThus area of heptagon is 1274.",
        "extracted_output": 2,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    },
    {
        "question": "There are $8!= 40320$ eight-digit positive integers that use each of the digits $1, 2, 3, 4, 5, 6, 7, 8$ exactly once. Let $N$ be the number of these integers that are divisible by $22$. Find the difference between $N$ and $2025$.",
        "right_answer": "279",
        "model_output": "We need permutations of digits 1–8 (each used once) that form an 8-digit number divisible by 22. Since 22 = 2·11, a number is divisible by 22 iff it is divisible by 2 and by 11.\n\n1) Divisible by 2: the last digit must be even. The available even digits are 2,4,6,8. So the final (8th) digit can be any of these 4 choices.\n\n2) Divisible by 11: for an 8-digit number with digits d1 d2 d3 d4 d5 d6 d7 d8, the alternating sum S = (d1−d2+d3−d4+d5−d6+d7−d8) must be a multiple of 11 (i.e. 0 or ±11, etc.). Here digits 1..8 sum to 36. Let A be sum of digits in odd positions: d1+d3+d5+d7, and B sum of digits in even positions: d2+d4+d6+d8. Then S = A − B, and A + B = 36, so A − B = 2A − 36 must be divisible by 11. Thus 2A ≡ 36 (mod 11). Reduce 36 ≡ 3 (mod 11), so 2A ≡ 3 (mod 11). Multiply both sides by inverse of 2 modulo 11, which is 6, so A ≡ 18 ≡ 7 (mod 11). Since A is sum of four distinct digits from 1..8, its possible integer values range from 1+2+3+4=10 up to 5+6+7+8=26. Among these, values congruent to 7 mod 11 are 7,18,29,... only 18 lies in [10,26]. So A must be 18, and then B = 36−18 = 18 also. So the sum of digits in odd positions must be 18.\n\nTherefore we need permutations where the four digits placed in the odd positions {1,3,5,7} sum to 18, and the last digit (position 8) is even.\n\nCount such permutations by choosing which 4 digits go to odd positions (must sum to 18), arranging them in the 4 odd slots (4! ways), arranging the remaining 4 digits in the 3 even slots d2,d4,d6 and the fixed last slot d8 (but remember the last slot must be even).\n\nBetter to count by cases on which digit is placed at position 8 (must be even): pick an even digit e for position 8 (4 choices). Then we must choose three other even/odd digits to fill positions appropriately but overall the odd-position digits must sum to 18.\n\nGiven e at position 8 (part of B, the even-position sum), B = 18 must include e plus the two other even-position digits in positions 2,4,6. So the three digits assigned to positions 2,4,6 together with e have sum 18. Equivalently, the four digits assigned to odd positions (the complement set) must sum to 18.\n\nSo for a chosen e, count number of 4-element subsets of {1..8} that do not contain e and that sum to 18. For each such subset, odd positions can be permuted in 4! ways, and the remaining 3 digits (besides e) go to positions 2,4,6 in 3! ways. So total for that e is (number of 4-sets not containing e with sum 18) * 4! * 3!. Total N = 4!·3!·(total number of 4-element subsets of {1..8} summing to 18 and not containing their complement-special?).\n\nBut note that any 4-element subset summing to 18 necessarily has its complement also summing to 18 (since total 36), so every 4-set summing to 18 is paired with its complement which also sums to 18; both sets are valid choices for odd positions, but when counting over e we require the 4-set does not contain e. So overall sum over e of (# 4-sets not containing e and sum 18) equals 4 times (total number of 4-sets summing to 18) minus for double counting? Simpler: Let M be total number of 4-element subsets of {1..8} that sum to 18. For each such 4-set S, there are exactly 4 choices of e (the digit in position 8) that are not in S (since e must be outside S). So summing over e gives total count = M * 4. Thus total N = (M * 4) * 4! * 3!.\n\nSo compute M: count 4-element subsets of {1..8} summing to 18. We can enumerate combinations quickly.\n\nFind all 4-element combos sum 18:\n\nStart with largest element 8:\n- 8 + 7 + 2 + 1 =18 -> {8,7,2,1}\n- 8 + 6 + 3 + 1 =18 -> {8,6,3,1}\n- 8 + 5 + 4 + 1 =18 -> {8,5,4,1}\n- 8 + 5 + 3 + 2 =18 -> {8,5,3,2}\n- 8 + 4 + 3 + 3 invalid\nSo with 8 we got 4 sets.\n\nWith max 7 (not including 8):\n7 + 6 + 4 + 1 =18 -> {7,6,4,1}\n7 + 6 + 3 + 2 =18 -> {7,6,3,2}\n7 + 5 + 4 + 2 =18 -> {7,5,4,2}\n7 + 5 + 3 + 3 invalid\nThat's 3 sets.\n\nMax 6 (without 7,8):\n6 + 5 + 4 + 3 =18 -> {6,5,4,3}\nAny others? 6+5+3+? =4 -> duplicate. So 1 set.\n\nTotal M = 4+3+1 = 8.\n\nThus N = M * 4 * 4! * 3! = 8 *4 *24 *6. Compute 8*4=32; 24*6=144; 32*144 = (30*144)+(2*144)=4320+288=4608.\n\nSo N = 4608. Difference between N and 2025: 4608 − 2025 = 2583.\n\nAnswer: 2583.",
        "extracted_output": 288,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    },
    {
        "question": "In $\\triangle ABC$ points $D$ and $E$ lie on $\\overline{AB}$ so that $AD < AE < AB$, while points $F$ and $G$ lie on $\\overline{AC}$ so that $AF < AG < AC$. Suppose $AD = 4$, $DE = 16$, $EB = 8$, $AF = 13$, $FG = 52$, and $GC = 26$. Let $M$ be the reflection of $D$ through $F$, and let $N$ be the reflection of $G$ through $E$. The area of quadrilateral $DEGF$ is $288$. Find the area of heptagon $AFNBCEM$.",
        "right_answer": "588",
        "model_output": "3528/5",
        "extracted_output": 5,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    }
]