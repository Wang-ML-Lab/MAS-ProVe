[
    {
        "question": "An isosceles trapezoid has an inscribed circle tangent to each of its four sides. The radius of the circle is $3$, and the area of the trapezoid is $72$. Let the parallel sides of the trapezoid have lengths $r$ and $s$, with $r \\neq s$. Find $r^2+s^2$",
        "right_answer": "504",
        "model_output": "Observations:\n1. A tangential quadrilateral (one with an inscribed circle) has sums of lengths of opposite sides equal. For trapezoid with parallel bases r and s and legs both equal (isosceles), if legs length = l, then r + s = 2l.\n2. Distance between bases = height h = radius = 3 (incircle radius equals distance between parallel sides).\n3. Area = (r + s)/2 * h = (r + s)/2 * 3 = 72 → r + s = 48.\n4. Thus legs length l = (r + s)/2 = 24.\n5. The horizontal offset between bases half-difference is a = (|s - r|)/2; by right triangle, l^2 = h^2 + a^2 so a^2 = l^2 - h^2 = 24^2 - 3^2 = 576 - 9 = 567.\n6. Then (s - r)^2 = 4a^2 = 4*567 = 2268. Compute r^2 + s^2 = (r + s)^2 - 2rs. But rs = [(r + s)^2 - (r - s)^2]/4. So r^2 + s^2 = (r + s)^2 - 2rs = (r + s)^2 - 2*{[(r + s)^2 - (r - s)^2]/4} = (r + s)^2 - [(r + s)^2 - (r - s)^2]/2 = ((r + s)^2)/2 + ((r - s)^2)/2.\nPlug values: (r + s)^2 = 48^2 = 2304, (r - s)^2 = 2268. So r^2 + s^2 = (2304 + 2268)/2 = 4572/2 = 2286.\n\nAnswer: 2286",
        "extracted_output": 2,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    },
    {
        "question": "There are $8!= 40320$ eight-digit positive integers that use each of the digits $1, 2, 3, 4, 5, 6, 7, 8$ exactly once. Let $N$ be the number of these integers that are divisible by $22$. Find the difference between $N$ and $2025$.",
        "right_answer": "279",
        "model_output": "Key observations:\n1. Divisibility by 22 requires divisible by 2 and by 11. Divisible by 2 means last digit is even: choices {2,4,6,8}.\n2. Divisibility by 11 for an 8-digit number: alternating sum (d1 - d2 + d3 - d4 + d5 - d6 + d7 - d8) ≡ 0 mod 11.\n3. For digits 1..8 sum S = 36. Let positions with + be four positions (1,3,5,7) sum A; positions with - (2,4,6,8) sum B = 36 - A. Alternating sum = A - B = 2A - 36 ≡ 0 mod 11 → 2A ≡ 3 mod 11.\n4. Solve 2A ≡3 mod11 → multiply inverse of 2 (6): A ≡ 6*3 =18 ≡7 mod11. So A must equal 7 or 18 or 29... but A is sum of four distinct digits from 1..8; possible sums between 1+2+3+4=10 and 5+6+7+8=26. So only A=18 valid.\n5. Count number of 4-element subsets of {1..8} summing to 18. Find combinations: list increasing quadruples sum 18. Possible sets: {1,3,6,8}=18; {1,4,5,8}=18; {1,4,6,7}=18; {2,3,5,8}=18; {2,3,6,7}=18; {2,4,5,7}=18; {3,4,5,6}=18. That's 7 subsets.\n6. For each valid subset assigned to + positions (positions 1,3,5,7) we must arrange its 4 digits among those positions (4! ways) and arrange remaining 4 digits among - positions (4! ways). Additionally last digit (position8) must be even. But position8 is a minus-position digit; among the 4 digits assigned to minus positions, at least one even needed and counts vary. Total count: for each subset, number = 4! * (number of permutations of the 4 minus-digits with last digit even) = 24 * (count of arrangements where last slot is even = (#even among minus digits) * 3! ).\n\nCompute total N: sum over the 7 subsets of 24 * (e * 6) = 24*6 * e =144 * e where e = number of even digits in the minus-set for that subset. So N = 144 * (total number of even digits across all 7 minus-sets).\nList the 7 subsets (plus-sets). Their minus-sets are complements; count evens in each minus-set:\nPlus {1,3,6,8} -> minus {2,4,5,7} evens {2,4}: e=2\n{1,4,5,8} -> minus {2,3,6,7} evens {2,6}: e=2\n{1,4,6,7} -> minus {2,3,5,8} evens {2,8}: e=2\n{2,3,5,8} -> minus {1,4,6,7} evens {4,6}: e=2\n{2,3,6,7} -> minus {1,4,5,8} evens {4,8}: e=2\n{2,4,5,7} -> minus {1,3,6,8} evens {6,8}: e=2\n{3,4,5,6} -> minus {1,2,7,8} evens {2,8}: e=2\n\nTotal even counts = 7*2 =14. So N =144 *14 =2016.\nDifference N - 2025 = 2016 - 2025 = -9.\n\nAnswer: -9",
        "extracted_output": 9,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    },
    {
        "question": "Find the number of ordered pairs $(x,y)$, where both $x$ and $y$ are integers between $-100$ and $100$ inclusive, such that $12x^2-xy-6y^2=0$.",
        "right_answer": "117",
        "model_output": "Key observations:\n1. Treat as quadratic in x: 12x^2 - x y - 6y^2 = 0 => x(12x - y) = 6y^2.\n2. Solve via rational slope: consider ratio t = x/y for y≠0, then 12t^2 - t - 6 = 0.\n3. Quadratic in t: discriminant Δ = 1 + 288 = 289 = 17^2, so t = (1 ± 17)/24 => t = 18/24 = 3/4 or t = -16/24 = -2/3.\n4. Thus for y≠0, x = (3/4) y or x = (-2/3) y; require integer x so y must be multiple of denominators: for x=(3/4)y need y multiple of 4; for x=(-2/3)y need y multiple of 3.\n5. Also consider y=0: then equation gives 12x^2 = 0 ⇒ x = 0.\n6. Count integer pairs in range [-100,100]: For y=0 one solution (0,0). For x=(3/4)y with y = 4k, y in [-100,100] ⇒ k integer with 4k ∈ [-100,100] ⇒ k ∈ [-25,25] ⇒ 51 values. For x=(-2/3)y with y = 3m, y ∈ [-100,100] ⇒ m ∈ [-33,33] ⇒ 67 values. Note overlap where both conditions hold: y must be multiple of lcm(4,3)=12, y=12n with n∈[-8,8] ⇒ 17 values; these give same x for both formulas, so counted twice; but (0,0) is among overlap (n=0).\nTotal ordered pairs = 51 + 67 - 17 (remove double counts) = 101.\n\nAnswer: 101",
        "extracted_output": 101,
        "extract_answer_code": "    def extract_model_answer(self, text: str) -> int:\n        \"\"\"Extract numerical answer from model output (AIME answers are integers 0-999)\"\"\"\n        # Look for <answer> tags first\n        if \"<answer>\" in text and \"</answer>\" in text:\n            answer_section = text.split(\"<answer>\")[1].split(\"</answer>\")[0].strip()\n        else:\n            answer_section = text\n        \n        # Look for boxed LaTeX\n        pattern = r\"\\\\boxed{((?:[^{}]|{[^{}]*})*)}\"\n        boxed_matches = re.findall(pattern, answer_section, re.DOTALL)\n        if boxed_matches:\n            answer_section = boxed_matches[-1].strip()\n        \n        # Extract 1-3 digit numbers from answer section\n        numbers = re.findall(r'\\b\\d{1,3}\\b', answer_section)\n        if numbers:\n            return int(numbers[-1])\n        \n        # Try common patterns\n        patterns = [\n            r'(?:answer|result|solution) is (\\d{1,3})',\n            r'(?:equals|=) (\\d{1,3})',\n            r'therefore (\\d{1,3})',\n            r'thus (\\d{1,3})'\n        ]\n        for pattern in patterns:\n            match = re.search(pattern, answer_section.lower())\n            if match:\n                return int(match.group(1))\n        \n        # Fall back to any 1-3 digit number in full text\n        all_numbers = re.findall(r'\\b\\d{1,3}\\b', text)\n        return int(all_numbers[-1]) if all_numbers else -1\n"
    }
]